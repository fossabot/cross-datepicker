!function(){var t=function(t){return"number"==typeof t?t?t<0?-1:1:t==t?0:NaN:NaN};$.fn.insertAt=$.fn.insertAt||function(t,n){return this.each(function(){0===t?n.prepend(this):n.children().eq(t-1).after(this)})};var n=function(n,a){if(n.data("cross-datepicker"))return this;n.attr("type","text"),(a=$.extend({},$.fn.cdp.defaults,a)).hideInput&&n.hide();var e=$("<div>").addClass(a.classes.container||"").data("input",n).insertBefore(n),r=[31,29,31,30,31,30,31,31,30,31,30,31],i=$("<select>").addClass(a.classes.controls||"").addClass(a.classes.days||""),s=$("<select>").addClass(a.classes.controls||"").addClass(a.classes.months||""),o=$("<select>").addClass(a.classes.controls||"").addClass(a.classes.year||""),d=function(t){for(var n={},a="",e=0,r={d:i,m:s,y:o},d=0,c=t;d<c.length;d++){var p=c[d];if(a==p?n[p].count++:"d"!=p&&"y"!=p&&"m"!=p||(n[p]={count:1,order:e++,e:r[p]},r[p].data("order",n[p].order),a=p),e>3)throw"Invalid date format"}return n},c=d(a.inputFormat),p=d(a.format);for(var l in p)p[l].e.appendTo(e);e.sort(function(t,n){return t.data("order")>n.data("order")?1:t.data("order")<n.data("order")?-1:0});var f=function(t,n){for(var a=String(t),e=n||p.d.count;e>a.length;)a="0"+a;return a},u=function(t,n){if(t>12)throw"Invalid month: "+t;var e=n||p.m.count,r=String(t);if(2==e)1==r.length&&(r="0"+r);else if(3==e)r=a.months[l-1].substr(0,3);else{if(4!=e)throw"Invalid month format";r=a.months[l-1]}return r},h=function(t,n){var a=String(t),e=n||p.y.count;if(2==e)a=a.substr(a.length-2,2);else if(4!=e)throw"Invalid year format";return a},y=function(){n.val(function(t,n,a,e,r){var i=["d","m","y"],s=t;"string"==typeof r&&(r=parseInt(r)),"string"==typeof e&&(e=parseInt(e)),"string"==typeof a&&(a=parseInt(a));for(var o=0;o<i.length;o++){for(var d=i[o],c=n[d],p="",l="",y=0;y<c.count;y++)p+=d;l="d"==d?f(r,c.count):"m"==d?u(e,c.count):h(a,c.count),s=s.replace(p,l)}return s}(a.inputFormat,c,o.val(),s.val(),i.val())),n.trigger("refresh-date")};this.updateInput=function(){y()};i.data("days",0);var v=function(t){if(i.data("days")!=r[t-1]){var n=parseInt(i.val()||"1");if(i.html(""),0!=t){a.addNullOption&&i.append("<option value=''>"+a.nullOptionText+"</option>");for(var e=1;e<=r[t-1];e++)$("<option>").attr("value",e).text(f(e)).appendTo(i);i.val(n)}}};i.change(function(){y(),n.trigger("change"),n.trigger("change-date")}),v(1),s.change(function(){v(parseInt($(this).val())),y(),n.trigger("change"),n.trigger("change-date")}),a.addNullOption&&s.append("<option value='0'>"+a.nullOptionText+"</option>");for(l=1;l<=12;l++)s.append("<option value='"+l+"'>"+u(l)+"</option>");if("string"==typeof a.years[0]){var g,m=(new Date).getFullYear();3==a.years.length?(m+=a.years[1],g=a.years[2]):g=a.years[1];for(l=m;l!=m+g;l+=t(g))o.append("<option value='"+l+"'>"+h(l)+"</option>")}else for(l=a.years[0];l!=a.years[1];l+=t(a.years[1]-a.years[0]))o.append("<option value='"+l+"'>"+h(l)+"</option>");o.change(function(){y(),n.trigger("change"),n.trigger("change-date")}),this.inputs={d:i,y:o,m:s},n.data("initial-day")&&$(function(){$.fn.cdp.statics.fns.set(n,[n.data("initial-year"),n.data("initial-month"),n.data("initial-day")])}),y(),n.data("cross-datepicker",this)};function a(){$("[data-cdp], [data-cross-datepicker]").each(function(){var t=$(this),n={};for(var a in $.fn.cdp.defaults){var e=t.data(a);if(null!=e){if("months"==a){var r=e.split(",");e=[],r.forEach(function(t){e.push(t.trim())})}else if("years"==a){r=e.split(",");e=[],r.forEach(function(t){var n=t.trim();isNaN(n)||(n=parseInt(n)),e.push(n)})}else"classes"==a&&"{"==e[0]&&(e=JSON.parse(e));n[a]=e}}t.cdp(n)})}$.fn.cdp=function(t,a){var e=$(this);if(0==e.length)return this;if(e.length>1)return e.each(function(){$(this).cdp(t)}),this;if(!e.is("input"))throw"You can apply Cross-DatePicker only on an 'input' element";if("string"==typeof t){var r=$.fn.cdp.statics;return r.fns[t]||console.error("Unknown function "+t),r.fns[t](e,a),this}new n(e,t);return this},$.fn.cdp.defaults={hideInput:!0,format:"d/mmm/yyyy",inputFormat:"yyyy-mm-dd",years:["now",-100],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],addNullOption:!1,nullOptionText:"Select",classes:{container:"cdp-container",controls:"cdp-select",days:"cdp-d",months:"cdp-m",years:"cdp-y"}},$.fn.cdp.statics={fns:{set:function(t,n){$.fn.cdp.statics;var a,e,r,i=t.data("cross-datepicker");if($.isArray(n))a=n[0],e=n[1],r=n[2];else if("string"==typeof n){var s=n.split("-");a=parseInt(s[0]),e=parseInt(s[1]),r=parseInt(s[2])}else a=n.year||n.y,e=n.month||n.m,r=n.day||n.d;i.inputs.y.val(String(a)),i.inputs.m.val(String(e)),i.inputs.d.val(String(r)),i.updateInput()}}},$.fn.cdp.apply=a,window.applyCrossDatePicker=a,window.applyCDP=a,$(a)}();